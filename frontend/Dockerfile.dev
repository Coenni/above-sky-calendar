# Development Dockerfile for frontend with hot-reload support
FROM timbru31/java-node:17-jre-18
WORKDIR /app

# Copy frontend package files
COPY frontend/package*.json ./
RUN npm ci

# Copy OpenAPI spec to parent directory (as expected by npm script: ../spec.yaml)
# When WORKDIR is /app, ../spec.yaml resolves to /spec.yaml
COPY spec.yaml /spec.yaml

# Generate API clients (requires Java!)
RUN npm run generate-api

# Copy frontend source
COPY frontend/ .

# Expose port for development server
EXPOSE 4200

# Start development server with host binding for Docker
CMD ["npm", "start", "--", "--host", "0.0.0.0"]