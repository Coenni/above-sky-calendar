<div class="family-page">
  <div class="page-header">
    <div class="header-content">
      <h1>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Family Members</h1>
      <p class="subtitle">Manage your family members</p>
    </div>
    <button (click)="toggleAddForm()" class="btn-add-member">
      {{ showAddForm() ? 'âœ• Cancel' : '+ Add Member' }}
    </button>
  </div>

  @if (loading()) {
    <div class="loading">Loading family members...</div>
  }

  <!-- Add Member Form -->
  @if (showAddForm() && !loading()) {
    <div class="add-member-form watercolor-card">
      <h3>Add Family Member</h3>
      <form (ngSubmit)="addMember()">
        <div class="form-group">
          <label for="username">Name *</label>
          <input
            type="text"
            id="username"
            [(ngModel)]="newMember.username"
            name="username"
            class="form-control"
            placeholder="Enter member name"
            required
          />
        </div>

        <div class="form-group">
          <label for="email">Email *</label>
          <input
            type="email"
            id="email"
            [(ngModel)]="newMember.email"
            name="email"
            class="form-control"
            placeholder="Enter email address"
            required
          />
        </div>

        <div class="form-group">
          <label for="color">Avatar Color</label>
          <select
            id="color"
            [(ngModel)]="newMember.color"
            name="color"
            class="form-control"
          >
            <option value="#A8B5A0">Sage Green</option>
            <option value="#D4906C">Terracotta</option>
            <option value="#B8D4C1">Mint</option>
            <option value="#F4C7AB">Peach</option>
            <option value="#E8B86D">Mustard</option>
          </select>
        </div>

        <div class="form-group">
          <label class="checkbox-label">
            <input
              type="checkbox"
              [(ngModel)]="newMember.isParent"
              name="isParent"
            />
            <span>Parent Account</span>
          </label>
        </div>

        <div class="form-actions">
          <button type="submit" class="btn btn-primary">Add Member</button>
          <button type="button" (click)="toggleAddForm()" class="btn btn-secondary">Cancel</button>
        </div>
      </form>
    </div>
  }

  @if (!loading()) {
    <div class="family-grid">
      @for (member of familyMembers(); track member.id) {
        <div class="family-card watercolor-card">
          <div class="member-avatar" [style.background]="getMemberColor(member.color)">
            {{ member.username.charAt(0).toUpperCase() }}
          </div>
          <div class="member-info">
            <h3 class="member-name">{{ member.username }}</h3>
            <p class="member-role">{{ member.isParent ? 'Parent' : 'Child' }}</p>
            @if (member.rewardPoints !== undefined) {
              <div class="member-points">ğŸ† {{ member.rewardPoints }} points</div>
            }
          </div>
        </div>
      } @empty {
        <div class="empty-state">
          <div class="empty-icon">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</div>
          <h3>No family members found</h3>
          <p>Add your first family member to get started!</p>
        </div>
      }
    </div>
  }
</div>
